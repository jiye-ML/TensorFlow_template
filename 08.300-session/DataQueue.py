'''解读利用queue方式读取数据十图详解tensorflow数据读取机制    https://zhuanlan.zhihu.com/p/27238630'''import tensorflow as tf'''为了防止计算和读取串行时，需要等待的额外时间，tensorflow采用队列的方式构建多线程一个线程用来向队列中填充数据，一个线程从队列中提取数据进行计算, 如图 data_queue.jpg所示使用tf.train.string_input_producer创建文件名队列后，整个系统其实还是处于“停滞状态”的，也就是说，我们文件名并没有真正被加入到队列中使用tf.train.start_queue_runners之后，才会启动填充队列的线程，这时系统就不再“停滞”。此后计算单元就可以拿到数据并进行计算，整个程序也就跑起来了'''with tf.Session() as sess:    filename = ["../data/1.jpg", "../data/2.jpg", "../data/3.jpg",]    filename_queue = tf.train.string_input_producer(filename, shuffle=False, num_epochs=5)    # reader从文件名队列中读取数据    reader = tf.WholeFileReader()    key, value = reader.read(filename_queue)    sess.run(tf.local_variables_initializer())    # 使用start_queue_runner 之后才会填充队列    threads = tf.train.start_queue_runners(sess=sess)    i = 0    while True:        i += 1        # 获取图片数据并保存        image_data = sess.run(value)        with open('test_{}.jpg'.format(i), 'wb') as f:            f.write(image_data)